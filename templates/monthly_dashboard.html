{% extends 'base.html' %}
{% block content %}
<div class="card">
    <div class="card-header">
        <h3><i class="fas fa-calendar-alt"></i> Monthly Dashboard - {{ current_month }}</h3>
    </div>
    
    <div class="dashboard-info">
        <div class="info-card">
            <h4>Total Deposits</h4>
            <div class="value">₹{{ total_deposits|floatformat:2 }}</div>
        </div>
        
        <div class="info-card">
            <h4>Total Withdrawals</h4>
            <div class="value">₹{{ total_withdrawals|floatformat:2 }}</div>
        </div>
        
        {% if net_change >= 0 %}
        <div class="info-card" style="background: linear-gradient(135deg, #4CAF50, #8BC34A);">
        {% else %}
        <div class="info-card" style="background: linear-gradient(135deg, #f44336, #e91e63);">
        {% endif %}
            <h4>Net Change</h4>
            <div class="value">₹{{ net_change|floatformat:2 }}</div>
        </div>
    </div>
    
    <h4>Monthly Transactions</h4>
    {% if transactions %}
    <table>
        <thead>
            <tr>
                <th>Date & Time</th>
                <th>Action</th>
                <th>Amount (₹)</th>
            </tr>
        </thead>
        <tbody>
            {% for t in transactions %}
            <tr>
                <td>{{ t.timestamp|date:"d M Y, H:i" }}</td>
                <td>
                    {% if t.action == "Deposit" %}
                        <span style="color: #4CAF50;">{{ t.action }}</span>
                    {% else %}
                        <span style="color: #f44336;">{{ t.action }}</span>
                    {% endif %}
                </td>
                <td>
                    {% if t.action == "Deposit" %}
                        +{{ t.amount|floatformat:2 }}
                    {% else %}
                        -{{ t.amount|floatformat:2 }}
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">
        No transactions found for this month.
    </div>
    {% endif %}
    
    <div style="margin-top: 20px;">
        <a href="{% url 'dashboard' %}" class="btn">Back to Dashboard</a>
    </div>
</div>
{% endblock %}